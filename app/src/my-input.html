<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="paper-time-picker.html">
<link rel="import" href="menu-overlay.html">
<link rel="import" href="paper-clock-selector.html">
<link rel="import" href="simple-menu.html">
<link rel="import" href="simple-menubar.html">
<link rel="import" href="my-animatable.html">
<link rel="import" href="my-animatable-triangle.html">

<dom-module id="my-input">

  <template>

    <style>
      :host {
        display: block;
        padding: 10px;
      }

      simple-menu,
    simple-menubar {
      display: inline-block;
      width: 100%;
    }

    simple-menu a {
      display: block;
    }

    simple-menubar a,
    simple-menu a {
      padding: 15px 20px;
      color: var(--primary-text-color);
      text-decoration: none;
    }

    simple-menu a[disabled],
    simple-menubar a[disabled] {
      color: var(--google-grey-300);
    }

    .horizontal-section {
      padding: 0;
      margin-bottom: 20px;
    }

    .row {
      height: 100px;
    }
    </style>

    <div id="scope">
            <paper-time-picker id="picker" periodStartSelected="{{periodStartSelected}}" periodEndSelected="{{periodEndSelected}}"></paper-time-picker>
    </div>
    <button on-click="_onCircleButtonClick">start</button>
    <button on-click="_onCircleStopClick">stop</button>

    <my-animatable id="orange" on-tap="_onPressedAnimation" on-track="_onPressedAnimation"></my-animatable>
    <my-animatable-triangle id="orangeTriangle" on-tap="_onPressedAnimationTriangle" on-track="_onPressedAnimationTriangle"></my-animatable-triangle>
    
    <menu-overlay id="plain" tabindex="-1">
      <h2>Hello world!</h2>
      <p>This can be closed by pressing the ESC key too.</p>
      <button on-click="_closePopUp">Close</button>
    </menu-overlay>

    <div class="horizontal-section-container">
    <div>
      <h3>Simple menu</h3>
      <div class="horizontal-section">
        <simple-menu>
          <a href="javascript:void(0)" role="menuitem">Item 0</a>
          <a href="javascript:void(0)" role="menuitem">Item 1</a>
          <a href="javascript:void(0)" role="menuitem" disabled>Item 2</a>
          <a href="javascript:void(0)" role="menuitem" hidden>Ghost</a>
          <a href="javascript:void(0)" role="menuitem">Item 3</a>
          <a href="javascript:void(0)" role="menuitem" style="display:none">Another ghost</a>
        </simple-menu>
      </div>
    </div>

    <div>
      <h3>Multi-select menu</h3>
      <div class="horizontal-section">
        <simple-menu multi>
          <a href="javascript:void(0)" role="menuitem">Item 0</a>
          <a href="javascript:void(0)" role="menuitem" disabled>Item 1</a>
          <a href="javascript:void(0)" role="menuitem" hidden>Ghost</a>
          <a href="javascript:void(0)" role="menuitem">Item 2</a>
          <a href="javascript:void(0)" role="menuitem">Item 3</a>
          <a href="javascript:void(0)" role="menuitem" style="display:none">Another ghost</a>
        </simple-menu>
      </div>
    </div>

    <div>
      <div class="row">
        <h3>Simple menubar</h3>
        <div class="horizontal-section">
          <simple-menubar>
            <a href="javascript:void(0)" role="menuitem">Item 0</a>
            <a href="javascript:void(0)" role="menuitem">Item 1</a>
            <a href="javascript:void(0)" role="menuitem" disabled>Item 2</a>
            <a href="javascript:void(0)" role="menuitem">Item 3</a>
          </simple-menubar>
        </div>
      </div>
      <div class="row">
        <h3>Multi-select menubar</h3>
        <div class="horizontal-section">
          <simple-menubar multi>
            <a href="javascript:void(0)" role="menuitem">Item 0</a>
            <a href="javascript:void(0)" role="menuitem">Item 1</a>
            <a href="javascript:void(0)" role="menuitem">Item 2</a>
            <a href="javascript:void(0)" role="menuitem">Item 3</a>
          </simple-menubar>
        </div>
      </div>
    </div>
  </div>

  </template>

  <script>

    Polymer({

      is: 'my-input',
      properties: {
          periodEndSelected: {
            type: Number,
            value: 0,
            notify: true,
            observer: '_periodEndChanged' 
          },
          periodStartSelected: {
            type: Number,
            value: 0,
            notify: true,
            observer: '_periodStartChanged' 
          }
      },
      _periodStartChanged: function(periodStartSelected) {
        },
      _periodEndChanged: function(periodStartSelected) {
        this.createPopUp();
        },
      createPopUp: function() {
        this.$.plain.open();
      },
      _closePopUp: function() {
        console.log("close");
        this.$.plain.close();
      },
      _onPressedAnimation: function(event) {
        var node = this.$.orange;
        console.log("_onPressedAnimation");
        var st = window.getComputedStyle(node, null);
        var transformValues = st.getPropertyValue("-webkit-transform") ||
         st.getPropertyValue("-moz-transform") ||
         st.getPropertyValue("-ms-transform") ||
         st.getPropertyValue("-o-transform") ||
         st.getPropertyValue("transform") ||
         "Either no transform set, or browser doesn't do getComputedStyle";
        console.log("transformValues: "+transformValues);
        var values = transformValues.split('(')[1];
        values = values.split(')')[0];
        values = values.split(',');
        var scale = values[0];
        var scaleNew = ((parseFloat(scale)+0.01)*100%100)/100;
        console.log('scaleNew: '+scaleNew);
        node.style.transform = 'scale('+scaleNew+','+scaleNew+')';
        if (node) {
          // node.animate();
          console.log("animating");
        }
      },
      _onPressedAnimationTriangle: function(event) {
        var node = this.$.orangeTriangle;
        console.log("_onPressedAnimation");
        var st = window.getComputedStyle(node, null);
        var transformValues = st.getPropertyValue("-webkit-transform") ||
         st.getPropertyValue("-moz-transform") ||
         st.getPropertyValue("-ms-transform") ||
         st.getPropertyValue("-o-transform") ||
         st.getPropertyValue("transform") ||
         "Either no transform set, or browser doesn't do getComputedStyle";
        console.log("transformValues: "+transformValues);
        var values = transformValues.split('(')[1];
        values = values.split(')')[0];
        values = values.split(',');
        var scale = values[0];
        var scaleNew = ((parseFloat(scale)+0.01)*100%100)/100;
        console.log('scaleNew: '+scaleNew);
        node.style.transform = 'scale('+scaleNew+','+scaleNew+')';
        if (node) {
          // node.animate();
          console.log("animating");
        }
      },
      _onCircleButtonClick: function(event) {
        var node = this.$.orangeTriangle;
        console.log("_onCircleButtonClick");
        node.style.transform = 'scale(0,0)';
        if (node) {
          // node.animate();
          console.log("animating");
        }
      },
      _onCircleStopClick: function(event) {
        var node = this.$.orange;
        console.log("_onCircleStopClick");
        if (node) {
          console.log("cancelling animation");
          node.cancelAnimation();
        }
      }
    });

  </script>

</dom-module>
